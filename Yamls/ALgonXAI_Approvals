openapi: 3.1.0
info:
  title: Learning Catalog Management API
  description: API to manage learning communities within an organization.
  version: 1.0.0
servers:
  - url: https://app1.fusionobjects.com
    description: Main API server for communities management
paths:
  openapi: 3.1.0

paths:
  /insert_template:
    post:
      operationId: insertTemplate
      summary: Insert an email template for notifications.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                template_name:
                  type: string
                  description: The name of the email template.
                subject:
                  type: string
                  description: The subject of the email.
                body:
                  type: string
                  description: The HTML body content of the email.
      responses:
        "200":
          description: Template added successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    description: Success message indicating the template was added successfully.
        "400":
          description: Invalid request data.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message indicating the nature of the invalid request data.
        "404":
          description: Template not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message indicating the template was not found.
  
  /process/create:
   post:
    operationId: createProcess
    summary: Creates a new process to the catalog.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              process_name:
                type: string
                description: The name of the process.
                example: "Change Manager 11"
              description:
                type: string
                description: The description of the process.
                example: "Process to change manager"
              email_template:
                type: string
                description: The template of the email.
    responses:
      "200":
        description: Process created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Process created successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.

  /process/view:
   post:
    operationId: viewProcesses
    summary: View process details from the catalog.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              query:
                type: object
    responses:
      "200":
        description: Processes retrieved successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        type: string
                        description: The name of the process.
                      description:
                        type: string
                        description: The description of the process.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.
      "404":
        description: Process not found.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Process not found.


  /approver/group/create:
   post:
    operationId: addApproversGroup
    summary: Adds a new approvers group.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              approver_name:
                type: string
                description: The name of the approver.
                example: "Demo group"
              group:
                type: string
                description: The name of the approvers group.
                example: "Product developer Team"
              allow_empty_groups:
                type: boolean
                description: A flag indicating whether empty groups are allowed.
                example: true
              approver_member:
                type: array
                items:
                  type: string
                description: A list of person names for the approvers group.
                example:
                  - "Courtney Allison"
                  - "Cindy Wright"
    responses:
      "200":
        description: Approvers group added successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Approvers group added successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.

  /approver/hierarchy/create:
   post:
    operationId: addApproversHierarchy
    summary: Adds a new approvers hierarchy.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              approver_name:
                type: string
                description: The name of the approver.
              department:
                type: string
                description: The name of the department.
              route_using:
                type: integer
                description: The method or criteria used for routing.
              approval_chain_of:
                type: string
                description: The entity for which the approval chain is defined.
              start_with:
                type: integer
                description: The starting point of the approval chain.
              number_of_levels:
                type: integer
                description: The number of levels in the approval chain.
              top_approver:
                type: integer
                description: The top-level approver number in the hierarchy.
    responses:
      "200":
        description: Approvers hierarchy added successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Approvers hierarchy added successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.

  /approver/representative/create:
   post:
    operationId: createApproverRepresentative
    summary: Creates a new approver representative.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              approver_name:
                type: string
                description: The name of the approver.
              representative_type:
                type: string
                description: The type of representative.
                example: "HR"
              representative_of:
                type: string
                description: The entity the representative is associated with.
                example: "Employee"
              approver_member:
                type: array
                items:
                  type: string
                description: The list of approvers' name.
                example: "John Doe"
    responses:
      "200":
        description: Approver representative created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Approver representative created successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.

  /approver/view:
    post:
      operationId: viewApprovers
      summary: View approver details from the catalog.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                query:
                  type: object
                  description: The query object to filter approver records.
      responses:
        "200":
          description: Approver details retrieved successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      type: object
                      properties:
                        approver_id:
                          type: string
                          description: The ID of the approver.
                          example: "66cf22322d2bb5bb3d2ac3fc"
                        approver_name:
                          type: string
                          description: The name of the approver.
                          example: "Head_of_Finance"
                        type:
                          type: string
                          description: The type of approver.
                          example: "representative"
                        representative_type:
                          type: string
                          description: The type of representative.
                          example: "individual"
                        representative_of:
                          type: string
                          description: The department or entity the representative is associated with.
                          example: "finance_department"
                        approver_member:
                          type: array
                          description: List of approver members.
                          items:
                            type: string
                            example: "Mikko Nieminen"
        "400":
          description: Invalid request data.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Invalid request data.
        "404":
          description: Approver not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Approver not found.

  /condition/create:
   post:
    operationId: createConditions
    summary: Create conditions for a specified process.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              process_name:
                type: string
                description: The name of the process for which the conditions are being created.
                example: "Course Approval"
              conditions:
                type: array
                items:
                  type: object
                  properties:
                    condition:
                      type: string
                      description: The condition to be evaluated.
                    condition_type:
                      type: string
                      description: The type of the condition.
                      enum:
                        - 'all'
                        - 'na'
                        - 'or'
                        - 'in'
                    condition_operator:
                      type: string
                      description: The operator for the condition.
                      enum:
                        - '<'
                        - '>'
                        - '<='
                        - '>='
                        - 'between'
                        - '=='
                        - '!='
                        - 'in'
    responses:
      "200":
        description: Conditions created successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Conditions created successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.


  /condition/view:
   post:
    operationId: viewConditions
    summary: View conditions for a specified process.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              query:
                type: object
    responses:
      "200":
        description: Conditions retrieved successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                conditions:
                  type: array
                  items:
                    type: object
                    properties:
                      process_name:
                        type: string
                        description: The name of the process.
                      condition:
                        type: string
                        description: The condition to be evaluated.
                      condition_type:
                        type: string
                        description: The type of the condition.
                      condition_operator:
                        type: string
                        description: The operator for the condition.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.
      "404":
        description: Conditions not found.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Conditions not found.

  /approval_rule/create:
   post:
    operationId: addApprovalRules
    summary: Add approval rules for a process.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              process_name:
                type: string
                description: The name of the process for which approval rules are being added.
                example: "Change Manager 11"
              conditions:
                type: array
                description: List of conditions with their respective approvers.
                items:
                  type: object
                  properties:
                    condition_id:
                      type: integer
                      description: The ID of the condition(always starts from 1).
                      example: "1"
                    approvers:
                      type: array
                      description: List of approver names for the condition.
                      items:
                        type: string
                      example: ["John Doe", "Demo representative"]
    responses:
      "200":
        description: Approval rules added successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                message:
                  type: string
                  example: Approval rules added successfully.
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.


  /transaction/create:
    post:
      operationId: addTransaction
      summary: Add a transaction for a specified process.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                transaction_name:
                  type: string
                  description: The name of the transaction being created.
                  example: "Fun Friday"
                process_name:
                  type: string
                  description: The name of the process for which the transaction is being added.
                  example: "Finance Department"
                transaction_fields:
                  type: object
                  properties:
                    value:
                      type: array
                      description: List of values for the transaction fields.
                      items:
                        type: number
                      example: [450]
                field_type:
                  type: array
                  description: List of field types corresponding to the values.
                  items:
                    type: string
                  example: ["amount"]
                general_info:
                  type: object
                  properties:
                    person_name:
                      type: string
                      description: The name of the person associated with the transaction.
                      example: "Erja Tetri"
                    description:
                      type: string
                      description: A description of the transaction.
                      example: "This is fun friday expense"
                    amount:
                      type: string
                      description: The amount associated with the transaction.
                      example: "450"
      responses:
        "200":
          description: Transaction added successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Transaction added successfully."
        "400":
          description: Invalid request data.
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: "Invalid request data."


  /transaction/view:
   post:
    operationId: viewTransactions
    summary: View transaction details from the catalog.
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              query:
                type: object
    responses:
      "200":
        description: Transactions details retrieved successfully.
        content:
          application/json:
            schema:
              type: object
              properties:
                items:
                  type: array
                  items:
                    type: object
      "400":
        description: Invalid request data.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Invalid request data.
      "404":
        description: Transaction not found.
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  example: Transaction not found.
